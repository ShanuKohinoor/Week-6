<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= title %></title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
</head>
<body class="flex justify-center items-center min-h-screen bg-gradient-to-br from-[#005f73] via-[#0a9396] to-[#94d2bd] m-0 p-0 overflow-hidden">

  <div class="bg-white/95 w-full max-w-md p-6 sm:p-8 rounded-xl shadow-[0_15px_40px_rgba(0,0,0,0.3)] text-center">

                 <!-- Title -->
          <h1 class="text-2xl sm:text-3xl font-bold px-20 mb-4"><%= title %></h1>



    <!-- Edit Student Form -->
    <form id="studentForm" action="/admin/edit-student/<%= student.id %>" method="POST" class="flex flex-col items-center w-full">

      <input type="text" id="name" name="name" value="<%= student.name %>" placeholder="Name"
             class="w-full p-2 my-1 rounded-lg border border-[#0a9396] text-sm focus:outline-none focus:ring-2 focus:ring-[#0a9396]">
      <p id="nameFeedback" class="text-red-600 text-left w-full text-xs mb-1"></p>

      <input type="email" id="email" name="email" value="<%= student.email %>" placeholder="Email"
             class="w-full p-2 my-1 rounded-lg border border-[#0a9396] text-sm focus:outline-none focus:ring-2 focus:ring-[#0a9396]">
      <p id="emailFeedback" class="text-red-600 text-left w-full text-xs mb-1"></p>

      <input type="text" id="year" name="year" value="<%= student.year %>" placeholder="Year of the Student"
             class="w-full p-2 my-1 rounded-lg border border-[#0a9396] text-sm focus:outline-none focus:ring-2 focus:ring-[#0a9396]">

      <input type="text" id="division" name="division" value="<%= student.division %>" placeholder="Division"
             class="w-full p-2 my-1 rounded-lg border border-[#0a9396] text-sm focus:outline-none focus:ring-2 focus:ring-[#0a9396]">

      <input type="text" id="parentMobile" name="parentMobile" value="<%= student.parentMobile %>" placeholder="Parent Mobile"
             class="w-full p-2 my-1 rounded-lg border border-[#0a9396] text-sm focus:outline-none focus:ring-2 focus:ring-[#0a9396]">
      <p id="parentFeedback" class="text-red-600 text-left w-full text-xs mb-1"></p>

      <input type="number" id="attendance" name="attendance" value="<%= student.attendance %>" placeholder="Attendance"
             class="w-full p-2 my-1 rounded-lg border border-[#0a9396] text-sm focus:outline-none focus:ring-2 focus:ring-[#0a9396]">

      <!-- Submit Button -->
      <button type="submit"
              class="w-72 py-2 mt-3 bg-gradient-to-br from-[#0a9396] to-[#94d2bd] text-white font-bold rounded-lg cursor-pointer transition duration-300 hover:from-[#005f73] hover:to-[#0e7c7b] hover:-translate-y-0.5 hover:shadow-md">
        Update Student
      </button>

      <p id="feedBack" class="text-red-600 text-left w-full text-xs mt-1"></p>

      <!-- Back Button -->
      <a href="/admin/home"
         class="w-72 mt-3 py-2 bg-gradient-to-br from-[#0a9396] to-[#94d2bd] text-white font-bold rounded-lg text-center transition duration-300 hover:from-[#005f73] hover:to-[#0e7c7b] hover:-translate-y-0.5 hover:shadow-md block mx-auto">
        ‚Üê Back to Dashboard
      </a>

    </form>
  </div>

  <!-- Form Validation Script -->
  <script>
   const form = document.querySelector('#studentForm')
   const nameInput = document.querySelector('#name')
   const emailInput = document.querySelector('#email')
   const parentInput = document.querySelector('#parentMobile')
   const feedback = document.querySelector('#feedBack')

   const nameFeedback = document.getElementById('nameFeedback')
   const emailFeedback = document.getElementById('emailFeedback')
   const parentFeedback = document.getElementById('parentFeedback')

   const namePattern = /^[A-Za-z]+(?:\s+[A-Za-z]+)+$/;
   const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+(\.[^\s@]+)?$/
   const parentPattern = /^\d{10}$/

   function nameCheck() {
     const name = nameInput.value.trim();
     nameFeedback.textContent = namePattern.test(name) ? '' : 'Incorrect name';
     return namePattern.test(name);
   }

   function emailCheck() {
     const email = emailInput.value.trim();
     emailFeedback.textContent = emailPattern.test(email) ? '' : 'Please enter a valid email';
     return emailPattern.test(email);
   }


   function parentCheck() {
     const parent = parentInput.value.trim();
     parentFeedback.textContent = parentPattern.test(parent) ? '' : 'Mobile number must be 10 digits';
     return parentPattern.test(parent);
   }

   nameInput.addEventListener('blur', nameCheck)
   emailInput.addEventListener('blur', emailCheck)
   parentInput.addEventListener('input', parentCheck)

   form.addEventListener('submit', (e) => {
     const allOk = nameCheck() && emailCheck() && parentCheck()
     if(!allOk){
       e.preventDefault()
       feedback.textContent = ' Please correct the errors above'
     } else {
       feedback.textContent = 'All ok, Form submitting...'
     }
   })
  </script>
</body>
</html>
